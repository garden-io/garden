kind: Build
type: container
name: skopeo
description: Used by the kubernetes provider for interacting with container registries within a cluster
variables:
  publish: false
  image_name: gardendev/skopeo
  image_tag: "${var.publish ? var.release_tag : 'dev'}"
  release_tag: 1.41.0-5
spec:
  localId: ${var.image_name}
  dockerfile: Dockerfile
  extraFlags: [ "--platform", "linux/amd64,linux/arm64", "--tag", "${var.image_name}:${var.image_tag}", "--push" ]
