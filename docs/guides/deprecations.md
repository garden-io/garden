---
order: 1
title: Deprecations and major-version updates
---

# Deprecations and major-version updates

The next major version of Garden, 0.14, will contain breaking changes. To make the update as seamless as possible for
your team, avoid functionality that has been deprecated in Garden 0.13.

When using `apiVersion: garden.io/v1` in your project configuration file, Garden will warn you if your configuration
depends on features that will be removed in Garden 0.14.

**EXPERIMENTAL**: You can opt-in to the new behaviour in Garden 0.14 by using `apiVersion: garden.io/v2`. This setting
will make Garden throw errors whenever it detects usage of deprecated functionality.

{% hint style="warning" %}
Please note that as of today, not all warnings are in place, so we are still working on the list of breaking changes.
Once the list of breaking changes is final, we will make this known here.
{% endhint %}

# Migration hints

## Updating action configs

To get rid of the [deprecated `build`](#acton-configs) usages,
you need to replace all root-level configuration entries like `build: my-app` with the `dependencies: [build.my-app]`.

For example, a configuration like

```yaml
kind: Build
name: backend
description: Backend service container image
type: container

---
kind: Deploy
name: backend
description: Backend service container
type: container
build: backend # <-- old config style uses `build` field

spec:
image: ${actions.build.backend.outputs.deploymentImageId}
...
```

should be replaced with

```yaml
kind: Build
name: backend
description: Backend service container image
type: container

---
kind: Deploy
name: backend
description: Backend service container
type: container

# use `dependencies` field instead of the `build`
dependencies:
- build.backend

spec:
image: ${actions.build.backend.outputs.deploymentImageId}
...
```

## Using optional value syntax in template strings

The optional value syntax in template strings is no longer supported in 0.14.

The question mark is now considered as a regular character in the template strings.
For example, if you have defined variable `baseUrl: http://example.com`,
then the template string `${var.baseUrl}?foo=bar` will result in `http://example.com?foo=bar`.

If you need to reference a potentially undefined variable,
please use an explicit fallback value like `${var.baseUrl || 'defaultValue'}` instead.

# Breaking changes

<!-- DO NOT CHANGE BELOW - AUTO-GENERATED -->
<!-- This section is auto-generated by `npm run generate-docs`. Any changes above these comments will be preserved. Make changes to deprecations in `deprecations.ts`. -->

## Kubernetes provider configuration

<h3 id="containerDeploymentStrategy">The `deploymentStrategy` config field</h3>

Do not use this config field. It has no effect as the experimental support for blue/green deployments (via the `blue-green` strategy) has been removed.

## Project configuration

<h3 id="dotIgnoreFiles">The `dotIgnoreFiles` config field</h3>

Use the `dotIgnoreFile` field instead. It only allows specifying one filename.

For more information, please refer to the [`dotIgnoreFile` reference documentation](../reference/project-config.md#dotignorefile).

<h3 id="apiVersionV0">Using `apiVersion: garden.io/v0` in the project config</h3>

Use `apiVersion: garden.io/v1` or higher instead.

For more information, please refer to the [`apiVersion` reference documentation](../reference/project-config.md#apiVersion).

<h3 id="projectConfigModules">The `modules` config field</h3>

Please use the `scan` field instead.

For more information, please refer to the [`scan` reference documentation](../reference/project-config.md#scan).

## Garden commands

<h3 id="kubernetesClusterInitCommand">The Kubernetes plugin command `cluster-init`</h3>

Do not use this command. It has no effect.

## Sync mode

<h3 id="syncStartCommand">The `sync-start` command.</h3>

Behaviour of `sync start` is now deprecated and will be changed in a future breaking change release.
Instead, we recommend running `garden deploy --sync` or starting syncs inside the dev console
with either `deploy --sync` or `sync start`.

## Garden Plugins

<h3 id="hadolintPlugin">The plugin `hadolint`</h3>

This plugin is still enabled by default in Garden 0.13, but will be removed in Garden 0.14. Do not use this plugin explicitly in Garden 0.14.

<h3 id="octantPlugin">The plugin `octant`</h3>

This plugin is still enabled by default in Garden 0.13, but will be removed in Garden 0.14. Do not use this plugin explicitly in Garden 0.14.

<h3 id="conftestPlugin">The plugin `conftest`</h3>

This plugin is still enabled by default in Garden 0.13, but will be removed in Garden 0.14. Do not use this plugin explicitly in Garden 0.14.

## Local mode

<h3 id="localMode">The `local mode` feature for container, kubernetes and helm deploys</h3>

Please do not use this in Garden 0.14

## Acton configs

<h3 id="buildConfigFieldOnRuntimeActions">The `build` config field in runtime action configs</h3>

Use `dependencies` config build to define the build dependencies.

For more information, please refer to the [Migration guide for action configs](#updating-action-configs).

## Build Staging

<h3 id="rsyncBuildStaging">The `legacy rsync-based file syncing` for build staging</h3>

Do not use `GARDEN_LEGACY_BUILD_STAGE`.

## Garden action types

<h3 id="configmapDeployAction">The `configmap Deploy` action type</h3>

Use the `kubernetes Deploy` action type instead.

<h3 id="persistentvolumeclaimDeployAction">The `persistentvolumeclaim Deploy` action type</h3>

Use the `kubernetes Deploy` action type instead.

## Template strings

<h3 id="optionalTemplateValueSyntax">The optional template value syntax (like `${var.foo}?`)</h3>

Use explicit fallback values instead.

For more information, please refer to the [Migration guide for optional values in template strings](#using-optional-value-syntax-in-template-strings).
