kind: Module
type: container
name: react-app
description: React App for TLS and DNS example
services:
  - name: frontend
    ports:
      - name: http
        containerPort: 3000
    ingresses:
      - path: /
        port: http
        hostname: react.${var.base-hostname}
        # tls:
        #   hosts:
        #     - react.${var.base-hostname}
        #   secretName: staging-cert-wildcard
    devMode: # This is the dev mode for the module, make sure to run it with `garden deploy --dev-mode --watch`
      command: [npm, start]
      sync:
        - source: ./src
          target: /app/src
          exclude: [node_modules]
        - source: package.json
          target: /package.json
tests:
  - name: unit
    args: ["npm", "test"]
